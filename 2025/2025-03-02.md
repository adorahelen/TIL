# ë³´ì•ˆ 

## ê´€ì œ í™˜ê²½ (AWS / ë¡œì»¬)

- 1ë²ˆê³¼ 2ë²ˆì€ ê¸°ë³¸ì ì¸ í™˜ê²½ êµ¬ì„±ì´ê³ ,
  3ë²ˆ(ë°©í™”ë²½)ê³¼ 4ë²ˆ(ì¹¨ì… íƒì§€/ì°¨ë‹¨ ì‹œìŠ¤í…œ)ì€ ë³´ì•ˆ ì¥ë¹„ ì—­í• 

âœ… **1. VirtualBoxë¥¼ í†µí•œ OS (ì„œë²„) êµ¬í˜„**
- **ì—­í• **: í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì„œë²„(ì›¹ ì„œë²„, DB ì„œë²„ ë“±) ì‹¤í–‰
- **ê¸°ëŠ¥**: ì‹¤ì œ ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•œ ê°€ìƒ ë¨¸ì‹ (VM) êµ¬ì¶•
- í˜„ì¬ [ AWS EC2, "Amazon Linux" ì‚¬ìš© ]


âœ… **2. ë„¤íŠ¸ì›Œí¬ í™˜ê²½ êµ¬ì¶• (GNS3 ë“± ë„¤íŠ¸ì›Œí¬ ì‹œë®¬ë ˆì´í„°)**
- **ì—­í• **: ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê³  ë¼ìš°íŒ…/ìŠ¤ìœ„ì¹­ êµ¬ì„±
- **ê¸°ëŠ¥**:
    - ë¼ìš°í„°/ìŠ¤ìœ„ì¹˜ ì„¤ì •
    - VLAN, ì„œë¸Œë„· êµ¬ë¶„
    - ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´
- í˜„ì¬ [ AWS VPC(Virtual Private Cloud) ì‚¬ìš© ]

âœ… **3. ë°©í™”ë²½ (Firewall) - ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ 1ì°¨ ë°©ì–´ì„ **
- **ì—­í• **: í—ˆìš©ëœ íŠ¸ë˜í”½ë§Œ í†µê³¼ì‹œí‚¤ê³ , ë¶ˆë²•ì ì¸ ì ‘ê·¼ì„ ì°¨ë‹¨
- **ê¸°ëŠ¥**:
    - íŒ¨í‚· í•„í„°ë§: íŠ¹ì • IP, í¬íŠ¸ ì°¨ë‹¨/í—ˆìš©
    - ìƒíƒœ ê¸°ë°˜ ê²€ì‚¬ (Stateful Inspection): ì—°ê²°ëœ íŠ¸ë˜í”½ì¸ì§€ í™•ì¸
    - DPI(Deep Packet Inspection): íŠ¸ë˜í”½ ë‚´ìš© ë¶„ì„í•˜ì—¬ ì•…ì„± íŠ¸ë˜í”½ ì°¨ë‹¨
- í˜„ì¬ [AWS ë³´ì•ˆ ê·¸ë£¹(Security Group) ë° NACL ì‚¬ìš© ] 

ğŸ”¥ **ì£¼ìš” ë°©í™”ë²½ ì†”ë£¨ì…˜**
- ì†Œí”„íŠ¸ì›¨ì–´ ê¸°ë°˜: Iptables, PF, Shorewall
- í•˜ë“œì›¨ì–´ ê¸°ë°˜: Cisco ASA, FortiGate, Palo Alto




---

# ë³´ì•ˆ ì‹œìŠ¤í…œ íë¦„ë„

#### ê³µê²©ì´ ë“¤ì–´ì™”ì„ ë•Œ íë¦„

```
1ï¸âƒ£ ê³µê²©ìê°€ ë„¤íŠ¸ì›Œí¬ë¡œ ì¹¨ì… ì‹œë„
    â†“
2ï¸âƒ£ ë°©í™”ë²½(Firewall)ì—ì„œ 1ì°¨ í•„í„°ë§
    - But í—ˆìš©ëœ í¬íŠ¸(ì˜ˆ: 80, 443) í†µê³¼
    - ë¹„ì¸ê°€ IP/í¬íŠ¸ ì°¨ë‹¨
    â†“
  3ï¸âƒ£ IDS/IPSì—ì„œ 2ì°¨ íƒì§€ ë° ì°¨ë‹¨
    - ì•…ì„± íŠ¸ë˜í”½ ê°ì§€ (SQL Injection, DDoS ë“±)
    - íƒì§€ëœ ê³µê²© ì°¨ë‹¨ ë˜ëŠ” ê²½ê³ 
    â†“
  4ï¸âƒ£ ì„œë²„ì— ëŒ€í•œ ì ‘ê·¼ ì—¬ë¶€ ê²°ì •
    - ë°©ì–´ ì„±ê³µ ì‹œ ê³µê²© ì°¨ë‹¨
    - ë°©ì–´ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ê¸°ë¡ ë° ëŒ€ì‘ ì¡°ì¹˜
```
#### íë¦„ë„ ì˜ˆì‹œ

> [ê³µê²©ì] â†’ [ë°©í™”ë²½] â†’ (í—ˆìš©ëœ íŠ¸ë˜í”½) â†’ [IDS/IPS] â†’ (ìœ„í˜‘ íƒì§€) â†’ [ì„œë²„ ì ‘ê·¼ ì—¬ë¶€ ê²°ì •]



---
# ë¡œê·¸ ë¶„ì„ / íƒì§€ ì°¨ë‹¨
## AWS í™˜ê²½ vs ë¡œì»¬(ì˜¨í”„ë ˆë¯¸ìŠ¤)

### [ 1. ì¹¨ì… íƒì§€ ë° ì°¨ë‹¨ ì‹œìŠ¤í…œ(IDS/IPS) ]

- **IDS (Intrusion Detection System)**: ê³µê²©ì„ íƒì§€í•˜ì§€ë§Œ ìë™ ì°¨ë‹¨í•˜ì§€ ì•ŠìŒ.
- **IPS (Intrusion Prevention System)**: ê³µê²©ì„ íƒì§€í•˜ê³  ìë™ìœ¼ë¡œ ì°¨ë‹¨ê¹Œì§€ ìˆ˜í–‰.

#### â‘  ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œì˜ IDS/IPS

ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ IDS/IPSë¥¼ êµ¬ì¶•í•´ì•¼ í•˜ë©°, ëŒ€í‘œì ì¸ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
- **ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ IDS/IPS (NIDS/NIPS)** -> ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ 
    - ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ê°ì‹œí•˜ëŠ” ë°©ì‹.
    - **ì‚¬ìš© ë„êµ¬**: Snort, Suricata, Zeek(Bro)
    - **êµ¬ì„± ë°©ì‹**:
        1. GNS3 ë“±ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• í›„ IDS/IPSë¥¼ íŠ¹ì • êµ¬ê°„(ì˜ˆ: ë¼ìš°í„° ì•)ì— ë°°ì¹˜
        2. íŒ¨í‚·ì„ ì‹¤ì‹œê°„ ë¶„ì„í•˜ê³  ì•…ì„± íŠ¸ë˜í”½ íƒì§€
        3. ë°©í™”ë²½(Iptables, Shorewall)ê³¼ ì—°ë™í•´ íŠ¹ì • IP ì°¨ë‹¨
- **í˜¸ìŠ¤íŠ¸(ì„œë²„) ê¸°ë°˜ IDS/IPS (HIDS/HIPS)** -> ì‹œìŠ¤í…œ ë³´ì•ˆ 
    - ê°œë³„ ì„œë²„ì—ì„œ ì‹œìŠ¤í…œ ë¡œê·¸ì™€ ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°ì‹œí•˜ëŠ” ë°©ì‹.
    - **ì‚¬ìš© ë„êµ¬**: OSSEC, Wazuh, AIDE
    - **êµ¬ì„± ë°©ì‹**:
        1. Web ì„œë²„ë‚˜ DB ì„œë²„ì— HIDS ì„¤ì¹˜
        2. íŒŒì¼ ë¬´ê²°ì„± ê²€ì‚¬ ë° ì´ìƒ í–‰ìœ„ íƒì§€
        3. ì´ìƒ ê°ì§€ ì‹œ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ ì „ì†¡

#### â‘¡ AWS í™˜ê²½ì—ì„œì˜ IDS/IPS

AWSëŠ” ìì²´ì ìœ¼ë¡œ ë³´ì•ˆ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë©°, ì˜¨í”„ë ˆë¯¸ìŠ¤ì²˜ëŸ¼ ì§ì ‘ IDS/IPSë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²½ìš°ê°€ ì ìŠµë‹ˆë‹¤. 

ì£¼ìš” ë°©ì‹ì€:
- **AWS ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì„œë¹„ìŠ¤ í™œìš©**
    - **AWS GuardDuty**: ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë° ì´ë²¤íŠ¸ ë¡œê·¸ ë¶„ì„í•˜ì—¬ ìœ„í˜‘ íƒì§€
    - **AWS WAF + AWS Shield**: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´í˜¸ (DDoS ê³µê²© ì°¨ë‹¨)
    - **AWS Network Firewall**: VPC ë‚´ë¶€ íŠ¸ë˜í”½ì„ ê°ì‹œí•˜ê³  í•„í„°ë§
- **ì˜¤í”ˆì†ŒìŠ¤ IDS/IPS ì ìš© ê°€ëŠ¥**
    - **Snort, Suricata**ë¥¼ AWS EC2ì— ì„¤ì¹˜í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ IDS/IPS êµ¬ì¶• ê°€ëŠ¥
    - **CloudWatch + Lambda**ë¥¼ í™œìš©í•œ ìë™ ì°¨ë‹¨ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥

### [ 2. ì›¹ ë¡œê·¸ ë¶„ì„ ë° ê³µê²© íƒì§€ ]

ì›¹ ì„œë²„ ë¡œê·¸ ë¶„ì„ì„ í†µí•´ ê³µê²© íŒ¨í„´ì„ íƒì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### â‘  ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œ ì›¹ ë¡œê·¸ ë¶„ì„
- **ì›¹ ë¡œê·¸ íŒŒì¼ ë¶„ì„ (Apache/Nginx ë¡œê·¸)**
    - `/var/log/nginx/access.log`, `/var/log/nginx/error.log`
    - **ê³µê²© ìœ í˜•**: SQL Injection, XSS, Directory Traversal ë“±
    - **ë¶„ì„ ë„êµ¬**: ELK Stack (Elasticsearch + Logstash + Kibana), AWStats
- **íŒ¨í‚· ë¶„ì„**
    - **ë„êµ¬**: Wireshark, tcpdumpë¡œ ë„¤íŠ¸ì›Œí¬ íŒ¨í‚· ë¶„ì„
    - **íƒì§€ í•­ëª©**: íŠ¹ì • íŒ¨í„´ (SQLi, XSS, DoS ê³µê²© ì‹œë„) íƒì§€
- **ìë™í™”ëœ ë¡œê·¸ ë¶„ì„**
    - **ë„êµ¬**: Python + Log Parserë¥¼ í™œìš©í•´ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ IP, ê³µê²© ì‹œë„ íƒì§€
    - **ì¶”ê°€ ë„êµ¬**: Fail2Banì„ ì—°ë™í•˜ì—¬ ìë™ ì°¨ë‹¨

#### â‘¡ AWS í™˜ê²½ì—ì„œ ì›¹ ë¡œê·¸ ë¶„ì„

AWSëŠ” ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„ì„ ìë™í™”í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.
- **AWS CloudTrail + AWS CloudWatch Logs**
    - **ê¸°ëŠ¥**: EC2, IAM ë“±ì˜ ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„
    - **í™œìš©**: AWS Lambdaë¥¼ í™œìš©í•˜ì—¬ íŠ¹ì • IP ì°¨ë‹¨ ê°€ëŠ¥
- **AWS WAF ë¡œê·¸ ë¶„ì„**
    - **ê¸°ëŠ¥**: WAFì˜ ACL ë¡œê·¸ë¥¼ ë¶„ì„í•˜ì—¬ ê³µê²© ì‹œë„ íƒì§€
    - **ë„êµ¬**: Kinesis + Amazon Athenaë¥¼ ì‚¬ìš©í•´ ëŒ€ëŸ‰ì˜ ë¡œê·¸ ë¶„ì„ ê°€ëŠ¥
- **ELK Stack í™œìš©**
    - **ê¸°ëŠ¥**: ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ AWS EC2ì—ì„œ ELK Stack êµ¬ì¶• ê°€ëŠ¥
    - **ì¶”ê°€ ë„êµ¬**: AWS OpenSearch Service(Elasticsearch ê¸°ë°˜) í™œìš© ê°€ëŠ¥


### ê²°ë¡ 

| í•­ëª©           | ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ (VirtualBox ë“±) | AWS EC2 í™˜ê²½ (í´ë¼ìš°ë“œ)           |
|----------------|-------------------------------|----------------------------------|
| **IDS/IPS**    | Snort, Suricata, Zeek(Bro) ì§ì ‘ ì„¤ì¹˜ | AWS GuardDuty, AWS WAF í™œìš©     |
| **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ** | ë°©í™”ë²½(Iptables, Shorewall) ì§ì ‘ ì„¤ì • | AWS Security Group, Network Firewall |
| **ì›¹ ë¡œê·¸ ë¶„ì„** | ELK Stack, Wireshark, tcpdump  | AWS CloudWatch, OpenSearch       |
| **ìë™ ì°¨ë‹¨**   | Fail2Ban, Python ìŠ¤í¬ë¦½íŠ¸     | Lambda + GuardDuty ìë™í™”        |
| **ìš´ì˜ ë°©ì‹**   | ì§ì ‘ êµ¬ì¶• ë° ìœ ì§€ë³´ìˆ˜ í•„ìš”    | AWS ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš© ê°€ëŠ¥      |

---



# ë¡œê·¸ë¶„ì„ ì˜ˆì‹œ



### ğŸ“„ ê°ì¢… ì¥ë¹„ì— ë‚¨ì•„ ìˆì„ ë¡œê·¸ ì˜ˆì‹œ

#### 1ï¸âƒ£ ë°©í™”ë²½ (Untangle, Iptables ë“±) ë¡œê·¸

```
[2025-03-02 12:30:45] ACCEPT TCP src=192.168.1.100 dst=192.168.1.200 sport=443 dport=8080
[2025-03-02 12:31:05] ACCEPT SSH src=192.168.1.150 dst=192.168.1.50 sport=55234 dport=22
[2025-03-02 12:31:10] ACCEPT HTTP src=192.168.1.120 dst=192.168.1.80 sport=55432 dport=80
```

- âœ” **ê³µê²©ìê°€ í—ˆìš©ëœ í¬íŠ¸ë¥¼ í†µí•´ ë‚´ë¶€ë¡œ ë“¤ì–´ì˜¨ ê¸°ë¡**
- âœ” **ë¹„ì •ìƒì ì¸ SSH ì ‘ì† ì‹œë„**

#### 2ï¸âƒ£ IDS/IPS (Snort, Suricata) ë¡œê·¸

```
[**] [1:2010935:2] ET POLICY Suspicious inbound to MSSQL port 1433 [**]
[Priority: 2] {TCP} 192.168.1.150:50000 -> 192.168.1.100:1433
```

- âœ” **IDSê°€ SQL ê³µê²© ì‹œë„ë¥¼ ê°ì§€í–ˆì§€ë§Œ ì°¨ë‹¨ë˜ì§€ ì•ŠìŒ**

#### 3ï¸âƒ£ ì›¹ ì„œë²„ (Apache/Nginx) ë¡œê·¸

```
192.168.1.150 - - [02/Mar/2025:12:45:15 +0900] "GET /login.php?user=admin'-- HTTP/1.1" 200
192.168.1.150 - - [02/Mar/2025:12:46:00 +0900] "POST /upload.php HTTP/1.1" 200
```

- âœ” **SQL Injection ì‹œë„ (`admin'--`)**
- âœ” **ì•…ì„± íŒŒì¼ ì—…ë¡œë“œ ì‹œë„ (`upload.php`)**

#### 4ï¸âƒ£ ì‹œìŠ¤í…œ ë¡œê·¸ (/var/log/auth.log, Windows Event Log)

```
Mar 02 12:47:25 server sshd[2432]: Accepted password for root from 192.168.1.150 port 55432 ssh2
Mar 02 12:47:30 server sudo: hacker : TTY=pts/1 ; PWD=/home/hacker ; USER=root ; COMMAND=/bin/bash
```

- âœ” **ê³µê²©ìê°€ SSHë¥¼ í†µí•´ ë£¨íŠ¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ê¶Œí•œ ìƒìŠ¹**

---


