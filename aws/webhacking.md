### Web-Hacking

## **공격 종류**

---

### **A Type**:
#### **특징**
- **에러 메시지**:
    - `java.lang.IllegalArgumentException: Invalid character found in method name [...]`
    - HTTP 메서드 이름이 유효하지 않은 문자를 포함하고 있어 오류 발생.
- **분석**:
    - 유효하지 않은 16진수 값들과 문자열이 포함된 HTTP 요청의 메서드 이름.
    - HTTP 메서드(GET, POST 등)가 아닌 임의의 데이터를 전달하여 애플리케이션의 취약점을 테스트하려는 시도로 분석 가능.
- **공격 의도**:
    - 의심스러운 데이터로 서버의 로직을 혼란시키거나, 서버에 예외 처리가 없는 경우를 악용하려는 시도.
    - 흔히 웹 방화벽 테스트나 취약한 서버에 대해 RCE(Remote Code Execution)를 시도할 때 사용됨.

---

### **B Type**:
#### **특징**
- **로그 내용**:
  ```
  📌 Request from IP: 43.134.114.183 - GET /application.properties
  ```
    - **요청 메서드**: GET
    - **요청 파일**: `/application.properties`
    - **User-Agent**: Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52
    - **응답 상태 코드**: 302 (리다이렉트)
    - **포트**: 8080
    - **프로토콜**: HTTP
- **분석**:
    - `/application.properties` 파일은 애플리케이션의 설정 정보를 포함하며, 민감한 데이터(DB 비밀번호 등)가 노출될 위험이 큼.
    - 공격자는 설정 파일을 직접 열람하기 위해 악성 요청을 보낸 것으로 추정.
    - **302 상태 코드**는 파일에 직접 접근이 불가능하여 리다이렉트된 것으로 보임.
- **공격 의도**:
    - 파일 시스템의 민감 데이터를 열람하려는 정보 탈취 시도.
    - 실패하더라도 요청 기록을 통해 서버의 구조나 방어 체계를 파악하려는 Reconnaissance(정찰) 공격일 가능성 존재.

---

### **대응 방안**
1. **공격 공통 대응**:
    - **웹 방화벽(WAF)** 적용: 악성 요청 패턴 차단.
    - **HTTP 메서드 유효성 검사**: 서버에서 허용되지 않은 HTTP 메서드는 무조건 차단.
    - **입력 데이터 검증**: HTTP 요청 내 데이터(헤더, 쿼리 등)의 유효성을 검사하고 이상 요청은 즉각 차단.

2. **A Type 대응**:
    - **비정상 메서드 요청 차단**:
        - HTTP 메서드 이름에 숫자나 특수 문자가 포함된 요청을 차단.
    - **로그 분석 강화**:
        - 악성 데이터가 반복적으로 발생하는지 IP와 경로 추적.

3. **B Type 대응**:
    - **파일 접근 제한**:
        - `/application.properties`와 같은 설정 파일은 외부에서 접근 불가능하도록 방어 설정 추가.
    - **IP 차단**:
        - 의심스러운 요청을 보낸 IP(`43.134.114.183`)를 차단.
    - **민감 파일 보호**:
        - 환경 변수를 활용하거나, 파일 경로를 암호화해 민감 데이터 보호.

--- 

## 뚫리지 않거나 피해가 없는 이유

- 기본적으로 application.yml은 resources 디렉터리에 있어서, Spring Boot에서 정적 리소스로 제공되지 않음.

- 정적 리소스란? 
  * 정적 리소스는 HTML, CSS, JavaScript, 이미지, 동영상 등과 같이 웹 서버에서 추가적인 처리 없이 그대로 클라이언트에게 제공되는 파일

- 이 상태로는 직접 application.yml을 노출하지 않는 것 같으니 크게 문제될 부분은 없어 보임.
  